!function(a,b){"function"==typeof define&&define.amd?define(["moment"],function(c){return a.DateRange=b(c)}):"object"==typeof module&&module.exports?module.exports=b(require("moment")):a.DateRange=b(a.moment)}(this,function(a){function b(b,c,d){void 0!==d||"object"!=typeof c||c instanceof a||c instanceof Date||(d=c),this.options=d=d||{},d.limit!==!1&&this.setLimits(d),this.set(b,c)}function c(b,c,d){for(var e=a(this.start);this.contains(e,d);)c.call(this,e.clone()),e.add(1,b)}function d(b,c,d){var e=this/b,f=Math.floor(e);if(f!==1/0){f===e&&d&&f--;for(var g=0;g<=f;g++)c.call(this,a(this.start.valueOf()+b.valueOf()*g))}}var e={year:!0,month:!0,week:!0,day:!0,hour:!0,minute:!0,second:!0};return b.prototype.constructor=b,b.prototype.clone=function(){return a().range(this.start,this.end,this.options)},b.prototype.contains=function(a,c){var d=this.start,e=this.end;return a instanceof b?d<=a.start&&(e>a.end||e.isSame(a.end)&&!c):d<=a&&(e>a||e.isSame(a)&&!c)},b.prototype.overlaps=function(a){return null!==this.intersect(a)},b.prototype.intersect=function(a){var c=this.start,d=this.end;return c<=a.start&&a.start<d&&d<a.end?new b(a.start,d):a.start<c&&c<a.end&&a.end<=d?new b(c,a.end):a.start<c&&c<=d&&d<a.end?this:c<=a.start&&a.start<=a.end&&a.end<=d?a:null},b.prototype.add=function(c){return this.overlaps(c)?new b(a.min(this.start,c.start),a.max(this.end,c.end)):null},b.prototype.subtract=function(a){var c=this.start,d=this.end;return null===this.intersect(a)?[new b(c,d)]:a.start<=c&&c<d&&d<=a.end?[]:a.start<=c&&c<a.end&&a.end<d?[new b(a.end,d)]:c<a.start&&a.start<d&&d<=a.end?[new b(c,a.start)]:c<a.start&&a.start<a.end&&a.end<d?[new b(c,a.start),new b(a.end,d)]:c<a.start&&a.start<d&&a.end<d?[new b(c,a.start),new b(a.start,d)]:void 0},b.prototype.toArray=function(a,b){var c=[];return this.by(a,function(a){c.push(a)},b),c},b.prototype.by=function(a,b,e){return"string"==typeof a?c.call(this,a,b,e):d.call(this,a,b,e),this},b.prototype.toString=function(){return this.start.format()+"/"+this.end.format()},b.prototype.valueOf=function(){return this.end-this.start},b.prototype.center=function(){var b=this.start+this.diff()/2;return a(b)},b.prototype.toDate=function(){return[this.start.toDate(),this.end.toDate()]},b.prototype.isSame=function(a){return this.start.isSame(a.start)&&this.end.isSame(a.end)},b.prototype.diff=function(a){return this.end.diff(this.start,a)},b.prototype.set=function(b,c){var d,e=b,f=c;1!==arguments.length&&void 0!==c||("object"==typeof b&&2===b.length?(e=b[0],f=b[1]):"string"==typeof b&&(d=b.split("/"),e=d[0],f=d[1])),this.options.limit!==!1?(this.actualStart=a(null===e?-864e13:e),this.actualEnd=a(null===f?864e13:f),this.actualRange=a.range(this.actualStart,this.actualEnd,{limit:!1}),this._intersect()):(this.start=a(null===e?-864e13:e),this.end=a(null===f?864e13:f))},b.prototype.setLimits=function(b){this.lowerLimit=a(-864e13),this.upperLimit=a(864e13),this.limitRange=a.range(this.lowerLimit,this.upperLimit,{limit:!1})},b.prototype._intersect=function(){var a=this.limitRange,b=this.actualRange;if(b.start<=a.start&&a.start<b.end&&b.end<a.end)this.start=a.start,this.end=b.end;else if(a.start<b.start&&b.start<a.end&&a.end<=b.end)this.start=b.start,this.end=a.end;else if(a.start<b.start&&b.start<=b.end&&b.end<a.end)this.start=b.start,this.end=b.end;else{if(!(b.start<=a.start&&a.start<=a.end&&a.end<=b.end))throw"Cannont set range outside of range limits";this.start=a.start,this.end=a.end}},a.range=function(c,d,f){return c in e?new b(a(this).startOf(c),a(this).endOf(c),f):new b(c,d,f)},a.range.constructor=b,a.fn.range=a.range,a.fn.within=function(a){return a.contains(this._d)},b});